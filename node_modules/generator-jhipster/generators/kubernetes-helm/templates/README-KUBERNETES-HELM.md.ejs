# JHipster generated helm package manager

## Preparation

You will need to push your image to a registry. If you have not done so, use the following commands to tag and push the images:

```
<%_ for (let i = 0; i < appsFolders.length; i++) { _%>
    <%_ if (appConfigs[i].baseName.toLowerCase() !== appConfigs[i].targetImageName) { _%>
$ docker image tag <%= appConfigs[i].baseName.toLowerCase() %> <%= appConfigs[i].targetImageName %>
    <%_ } _%>
$ <%= dockerPushCommand %> <%= appConfigs[i].targetImageName %>
<%_ } _%>
```

## Prerequisites

To use the templates generated by this sub-generator `helm cli and tiller` should be installed. Instructions on installing `helm` can be referred
at [https://github.com/helm/helm](https://github.com/helm/helm)

Once, helm is installed, then you need to add the below repositories,
```
helm repo add stable https://kubernetes-charts.storage.googleapis.com
helm repo add incubator https://kubernetes-charts-incubator.storage.googleapis.com
```  
These repos should be added to the local cache, because this sub-generator will pull some charts from these repos. 

This repo in turn uses `kubernets` sub-generator for the microservices manifests and few service like db, elk, prometheus etc. are referred from the above repos. 


## Deployment

You can deploy all your apps by running the below bash command:

```
bash helm-apply.sh (or) ./helm-apply.sh
```

`helm-apply.sh` will always do a clean install. Any of the existing charts with the same identity gets removed first and then it does a clean install.


You can upgrade all your apps (if at all if you have made any changes to the generated manifests) by running the below bash command:

```
bash helm-upgrade.sh (or) ./helm-upgrade.sh
```

For kubernetes specific info, refer `kubernetes` sub-generator readme instructions.

### Backlogs to be covered
* Couchbase is yet to be integrated with helm repo, it is still referring the k8s sub generator manifest. Not tested.
* helm upgrade - to be tested
* Istio - to be tested
